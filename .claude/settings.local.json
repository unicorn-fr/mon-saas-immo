{
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(npm run type-check:*)",
      "Bash(npm install:*)",
      "Bash(npx prisma migrate dev:*)",
      "Bash(npx prisma generate:*)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/public/manifest.json << 'EOF'\n{\n  \"name\": \"ImmoParticuliers - Gestion Locative\",\n  \"short_name\": \"ImmoParticuliers\",\n  \"description\": \"Plateforme de gestion locative entre particuliers. Publiez vos annonces, gÃ©rez vos visites et communiquez directement avec les locataires.\",\n  \"start_url\": \"/\",\n  \"display\": \"standalone\",\n  \"background_color\": \"#ffffff\",\n  \"theme_color\": \"#3b82f6\",\n  \"orientation\": \"portrait-primary\",\n  \"scope\": \"/\",\n  \"icons\": [\n    {\n      \"src\": \"/icons/icon-72x72.png\",\n      \"sizes\": \"72x72\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-96x96.png\",\n      \"sizes\": \"96x96\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-128x128.png\",\n      \"sizes\": \"128x128\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-144x144.png\",\n      \"sizes\": \"144x144\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-152x152.png\",\n      \"sizes\": \"152x152\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-192x192.png\",\n      \"sizes\": \"192x192\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-384x384.png\",\n      \"sizes\": \"384x384\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    },\n    {\n      \"src\": \"/icons/icon-512x512.png\",\n      \"sizes\": \"512x512\",\n      \"type\": \"image/png\",\n      \"purpose\": \"any maskable\"\n    }\n  ],\n  \"categories\": [\"business\", \"lifestyle\", \"productivity\"],\n  \"screenshots\": [\n    {\n      \"src\": \"/screenshots/home.png\",\n      \"sizes\": \"540x720\",\n      \"type\": \"image/png\",\n      \"form_factor\": \"narrow\"\n    },\n    {\n      \"src\": \"/screenshots/search.png\",\n      \"sizes\": \"540x720\",\n      \"type\": \"image/png\",\n      \"form_factor\": \"narrow\"\n    },\n    {\n      \"src\": \"/screenshots/dashboard-desktop.png\",\n      \"sizes\": \"1280x720\",\n      \"type\": \"image/png\",\n      \"form_factor\": \"wide\"\n    }\n  ],\n  \"shortcuts\": [\n    {\n      \"name\": \"Rechercher\",\n      \"short_name\": \"Recherche\",\n      \"description\": \"Rechercher des propriÃ©tÃ©s\",\n      \"url\": \"/search\",\n      \"icons\": [{ \"src\": \"/icons/search-96x96.png\", \"sizes\": \"96x96\" }]\n    },\n    {\n      \"name\": \"Mes Messages\",\n      \"short_name\": \"Messages\",\n      \"description\": \"AccÃ©der Ã  mes messages\",\n      \"url\": \"/messages\",\n      \"icons\": [{ \"src\": \"/icons/message-96x96.png\", \"sizes\": \"96x96\" }]\n    },\n    {\n      \"name\": \"Mes Visites\",\n      \"short_name\": \"Visites\",\n      \"description\": \"GÃ©rer mes visites\",\n      \"url\": \"/my-bookings\",\n      \"icons\": [{ \"src\": \"/icons/calendar-96x96.png\", \"sizes\": \"96x96\" }]\n    }\n  ],\n  \"prefer_related_applications\": false\n}\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/public/service-worker.js << 'EOF'\n// Service Worker for ImmoParticuliers PWA\n// Version 1.0.0\n\nconst CACHE_NAME = 'immoparticuliers-v1'\nconst RUNTIME_CACHE = 'immoparticuliers-runtime'\n\n// Assets to cache on install\nconst PRECACHE_ASSETS = [\n  '/',\n  '/index.html',\n  '/manifest.json',\n  '/offline.html',\n]\n\n// Install event - cache core assets\nself.addEventListener\\('install', \\(event\\) => {\n  console.log\\('[Service Worker] Installing...'\\)\n  \n  event.waitUntil\\(\n    caches.open\\(CACHE_NAME\\).then\\(\\(cache\\) => {\n      console.log\\('[Service Worker] Precaching assets'\\)\n      return cache.addAll\\(PRECACHE_ASSETS\\)\n    }\\).then\\(\\(\\) => {\n      // Force the waiting service worker to become the active service worker\n      return self.skipWaiting\\(\\)\n    }\\)\n  \\)\n}\\)\n\n// Activate event - clean up old caches\nself.addEventListener\\('activate', \\(event\\) => {\n  console.log\\('[Service Worker] Activating...'\\)\n  \n  event.waitUntil\\(\n    caches.keys\\(\\).then\\(\\(cacheNames\\) => {\n      return Promise.all\\(\n        cacheNames.map\\(\\(cacheName\\) => {\n          if \\(cacheName !== CACHE_NAME && cacheName !== RUNTIME_CACHE\\) {\n            console.log\\('[Service Worker] Deleting old cache:', cacheName\\)\n            return caches.delete\\(cacheName\\)\n          }\n        }\\)\n      \\)\n    }\\).then\\(\\(\\) => {\n      // Take control of all pages immediately\n      return self.clients.claim\\(\\)\n    }\\)\n  \\)\n}\\)\n\n// Fetch event - serve from cache, fallback to network\nself.addEventListener\\('fetch', \\(event\\) => {\n  const { request } = event\n  const url = new URL\\(request.url\\)\n\n  // Skip cross-origin requests\n  if \\(url.origin !== location.origin\\) {\n    return\n  }\n\n  // Skip API requests from caching \\(always fetch fresh\\)\n  if \\(url.pathname.startsWith\\('/api/'\\)\\) {\n    event.respondWith\\(\n      fetch\\(request\\).catch\\(\\(\\) => {\n        // If offline and API request fails, could return a custom offline response\n        return new Response\\(JSON.stringify\\({ error: 'Offline' }\\), {\n          headers: { 'Content-Type': 'application/json' }\n        }\\)\n      }\\)\n    \\)\n    return\n  }\n\n  // For navigation requests \\(HTML pages\\)\n  if \\(request.mode === 'navigate'\\) {\n    event.respondWith\\(\n      fetch\\(request\\).catch\\(\\(\\) => {\n        // If offline, serve the offline page\n        return caches.match\\('/offline.html'\\)\n      }\\)\n    \\)\n    return\n  }\n\n  // Cache-first strategy for static assets\n  event.respondWith\\(\n    caches.match\\(request\\).then\\(\\(cachedResponse\\) => {\n      if \\(cachedResponse\\) {\n        // Return cached version\n        return cachedResponse\n      }\n\n      // Not in cache, fetch from network\n      return fetch\\(request\\).then\\(\\(response\\) => {\n        // Check if we received a valid response\n        if \\(!response || response.status !== 200 || response.type !== 'basic'\\) {\n          return response\n        }\n\n        // Clone the response\n        const responseToCache = response.clone\\(\\)\n\n        // Cache the fetched response for future use\n        caches.open\\(RUNTIME_CACHE\\).then\\(\\(cache\\) => {\n          cache.put\\(request, responseToCache\\)\n        }\\)\n\n        return response\n      }\\).catch\\(\\(\\) => {\n        // If both cache and network fail, return a fallback\n        return caches.match\\('/offline.html'\\)\n      }\\)\n    }\\)\n  \\)\n}\\)\n\n// Background sync for offline actions \\(optional, for future enhancement\\)\nself.addEventListener\\('sync', \\(event\\) => {\n  console.log\\('[Service Worker] Background sync:', event.tag\\)\n  \n  if \\(event.tag === 'sync-messages'\\) {\n    event.waitUntil\\(syncMessages\\(\\)\\)\n  }\n}\\)\n\n// Push notifications \\(optional, for future enhancement\\)\nself.addEventListener\\('push', \\(event\\) => {\n  console.log\\('[Service Worker] Push received:', event\\)\n  \n  const options = {\n    body: event.data ? event.data.text\\(\\) : 'Nouvelle notification',\n    icon: '/icons/icon-192x192.png',\n    badge: '/icons/icon-72x72.png',\n    vibrate: [200, 100, 200],\n    tag: 'notification',\n    requireInteraction: false,\n  }\n\n  event.waitUntil\\(\n    self.registration.showNotification\\('ImmoParticuliers', options\\)\n  \\)\n}\\)\n\n// Notification click handler\nself.addEventListener\\('notificationclick', \\(event\\) => {\n  console.log\\('[Service Worker] Notification clicked:', event\\)\n  \n  event.notification.close\\(\\)\n  \n  event.waitUntil\\(\n    clients.openWindow\\('/'\\)\n  \\)\n}\\)\n\n// Helper function for background sync \\(placeholder\\)\nasync function syncMessages\\(\\) {\n  // Implement message syncing logic here\n  console.log\\('[Service Worker] Syncing messages...'\\)\n}\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/public/offline.html << 'EOF'\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Hors ligne - ImmoParticuliers</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n      background: linear-gradient\\(135deg, #667eea 0%, #764ba2 100%\\);\n      min-height: 100vh;\n      display: flex;\n      align-items: center;\n      justify-center;\n      padding: 20px;\n    }\n\n    .container {\n      text-align: center;\n      background: white;\n      padding: 60px 40px;\n      border-radius: 20px;\n      box-shadow: 0 20px 60px rgba\\(0, 0, 0, 0.3\\);\n      max-width: 500px;\n      width: 100%;\n    }\n\n    .icon {\n      font-size: 80px;\n      margin-bottom: 20px;\n    }\n\n    h1 {\n      font-size: 32px;\n      color: #1a202c;\n      margin-bottom: 16px;\n    }\n\n    p {\n      font-size: 18px;\n      color: #4a5568;\n      margin-bottom: 32px;\n      line-height: 1.6;\n    }\n\n    .button {\n      display: inline-block;\n      padding: 16px 32px;\n      background: linear-gradient\\(135deg, #667eea 0%, #764ba2 100%\\);\n      color: white;\n      text-decoration: none;\n      border-radius: 12px;\n      font-weight: 600;\n      font-size: 16px;\n      transition: transform 0.2s, box-shadow 0.2s;\n    }\n\n    .button:hover {\n      transform: translateY\\(-2px\\);\n      box-shadow: 0 10px 20px rgba\\(102, 126, 234, 0.4\\);\n    }\n\n    .status {\n      margin-top: 24px;\n      padding: 12px;\n      background: #fef3c7;\n      border-radius: 8px;\n      font-size: 14px;\n      color: #92400e;\n    }\n\n    @media \\(max-width: 640px\\) {\n      .container {\n        padding: 40px 20px;\n      }\n\n      h1 {\n        font-size: 24px;\n      }\n\n      p {\n        font-size: 16px;\n      }\n\n      .icon {\n        font-size: 60px;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"icon\">ðŸ“¡</div>\n    <h1>Vous Ãªtes hors ligne</h1>\n    <p>\n      Il semblerait que vous n'ayez pas de connexion internet. \n      VÃ©rifiez votre connexion et rÃ©essayez.\n    </p>\n    <a href=\"/\" class=\"button\" onclick=\"location.reload\\(\\); return false;\">\n      RÃ©essayer\n    </a>\n    <div class=\"status\" id=\"status\">\n      VÃ©rification de la connexion...\n    </div>\n  </div>\n\n  <script>\n    // Check connection status\n    function updateConnectionStatus\\(\\) {\n      const status = document.getElementById\\('status'\\)\n      if \\(navigator.onLine\\) {\n        status.textContent = 'âœ“ Connexion rÃ©tablie ! Cliquez sur RÃ©essayer.'\n        status.style.background = '#d1fae5'\n        status.style.color = '#065f46'\n      } else {\n        status.textContent = 'âš  Toujours hors ligne. En attente de connexion...'\n        status.style.background = '#fef3c7'\n        status.style.color = '#92400e'\n      }\n    }\n\n    // Listen for connection changes\n    window.addEventListener\\('online', updateConnectionStatus\\)\n    window.addEventListener\\('offline', updateConnectionStatus\\)\n\n    // Initial check\n    updateConnectionStatus\\(\\)\n\n    // Auto-reload when connection is back\n    window.addEventListener\\('online', \\(\\) => {\n      setTimeout\\(\\(\\) => {\n        location.reload\\(\\)\n      }, 1000\\)\n    }\\)\n  </script>\n</body>\n</html>\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/src/components/pwa/UpdatePWA.tsx << 'EOF'\nimport { useEffect, useState } from 'react'\nimport { RefreshCw, X } from 'lucide-react'\n\nexport const UpdatePWA = \\(\\) => {\n  const [showUpdate, setShowUpdate] = useState\\(false\\)\n\n  useEffect\\(\\(\\) => {\n    // Listen for service worker update available event\n    const handleUpdateAvailable = \\(\\) => {\n      setShowUpdate\\(true\\)\n    }\n\n    window.addEventListener\\('sw-update-available', handleUpdateAvailable\\)\n\n    return \\(\\) => {\n      window.removeEventListener\\('sw-update-available', handleUpdateAvailable\\)\n    }\n  }, []\\)\n\n  const handleUpdate = \\(\\) => {\n    // Reload the page to activate the new service worker\n    window.location.reload\\(\\)\n  }\n\n  const handleDismiss = \\(\\) => {\n    setShowUpdate\\(false\\)\n  }\n\n  if \\(!showUpdate\\) {\n    return null\n  }\n\n  return \\(\n    <div className=\"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-top duration-300\">\n      <div className=\"bg-white rounded-xl shadow-2xl p-6 border-2 border-primary-200\">\n        {/* Close Button */}\n        <button\n          onClick={handleDismiss}\n          className=\"absolute top-3 right-3 p-1 hover:bg-gray-100 rounded-lg transition-colors\"\n          aria-label=\"Fermer\"\n        >\n          <X className=\"w-5 h-5 text-gray-600\" />\n        </button>\n\n        {/* Content */}\n        <div className=\"flex items-start gap-4 mb-4\">\n          <div className=\"w-12 h-12 bg-primary-50 rounded-xl flex items-center justify-center flex-shrink-0\">\n            <RefreshCw className=\"w-6 h-6 text-primary-600\" />\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"font-bold text-lg text-gray-900 mb-1\">\n              Nouvelle version disponible\n            </h3>\n            <p className=\"text-sm text-gray-600\">\n              Une nouvelle version de l'application est prÃªte Ã  Ãªtre installÃ©e.\n            </p>\n          </div>\n        </div>\n\n        {/* Update Button */}\n        <button\n          onClick={handleUpdate}\n          className=\"w-full px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors flex items-center justify-center gap-2\"\n        >\n          <RefreshCw className=\"w-5 h-5\" />\n          Mettre Ã  jour maintenant\n        </button>\n\n        <p className=\"text-xs text-gray-500 text-center mt-3\">\n          La page sera rechargÃ©e automatiquement\n        </p>\n      </div>\n    </div>\n  \\)\n}\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/PROGRESS.md << 'EOF'\n\n---\n\n## ðŸ“ Module Recherche avec Carte Interactive \\(Frontend\\) - 10 FÃ©vrier 2026\n\n### Composant SearchMap\n**Fichier**: `client/src/components/property/SearchMap.tsx`\n\nNouveau composant pour afficher les propriÃ©tÃ©s sur une carte interactive Leaflet :\n\n#### FonctionnalitÃ©s principales :\n- **IntÃ©gration Leaflet** : Utilise OpenStreetMap avec import dynamique\n- **Marqueurs personnalisÃ©s** : Affichent le prix de chaque propriÃ©tÃ©\n- **Popups riches** : Image, titre, ville, prix et bouton \"Voir\"\n- **SÃ©lection de propriÃ©tÃ©** : Callback `onPropertySelect` pour synchroniser avec la liste\n- **Ajustement automatique** : La carte s'adapte pour afficher tous les marqueurs\n- **Changement de zone** : Callback `onBoundsChange` pour filtrer par zone visible\n\n#### Points techniques :\n- Filtre les propriÃ©tÃ©s avec coordonnÃ©es GPS valides\n- Nettoyage des marqueurs Ã  chaque mise Ã  jour\n- Gestion du cycle de vie de la carte \\(cleanup on unmount\\)\n- Ã‰tat de chargement avec spinner\n- Overlay informatif montrant le nombre de biens\n\n### IntÃ©gration dans SearchProperties\n**Fichier**: `client/src/pages/public/SearchProperties.tsx`\n\nModifications apportÃ©es :\n\n#### 1. Nouveaux imports\n```typescript\nimport { SearchMap } from '../../components/property/SearchMap'\nimport { Map as MapIcon } from 'lucide-react'\n```\n\n#### 2. Ã‰tat Ã©tendu\n```typescript\nconst [viewMode, setViewMode] = useState<'grid' | 'list' | 'map'>\\('grid'\\)\nconst [selectedPropertyId, setSelectedPropertyId] = useState<string | null>\\(null\\)\n```\n\n#### 3. Bouton de vue carte\nAjout d'un troisiÃ¨me bouton dans le sÃ©lecteur de vue \\(Grille / Liste / Carte\\)\n\n#### 4. Rendu conditionnel\n- **Mode carte** : Affiche `SearchMap` avec hauteur adaptative `h-[calc\\(100vh-280px\\)]`\n- **Mode grille/liste** : Affiche les `PropertyCard` comme avant\n- Pagination masquÃ©e en mode carte\n\n### RÃ©sultat\nâœ… Les utilisateurs peuvent maintenant visualiser les propriÃ©tÃ©s sur une carte\nâœ… Navigation fluide entre les trois modes de vue\nâœ… Synchronisation possible entre carte et liste \\(via selectedPropertyId\\)\nâœ… Interface responsive et performante\n\nEOF)",
      "Bash(node --version:*)",
      "Bash(npm --version:*)",
      "Bash(psql:*)",
      "Bash(createdb:*)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/server/prisma/seed.ts << 'EOF'\nimport { PrismaClient } from '@prisma/client'\nimport bcrypt from 'bcrypt'\n\nconst prisma = new PrismaClient\\(\\)\n\nasync function main\\(\\) {\n  console.log\\('ðŸŒ± Seeding database...'\\)\n\n  // Create Admin User\n  const adminPassword = await bcrypt.hash\\('admin123', 10\\)\n  const admin = await prisma.user.upsert\\({\n    where: { email: 'admin@immoparticuliers.fr' },\n    update: {},\n    create: {\n      email: 'admin@immoparticuliers.fr',\n      password: adminPassword,\n      firstName: 'Admin',\n      lastName: 'ImmoParticuliers',\n      role: 'ADMIN',\n      emailVerified: true,\n    },\n  }\\)\n  console.log\\('âœ… Admin created:', admin.email\\)\n\n  // Create Owner User\n  const ownerPassword = await bcrypt.hash\\('owner123', 10\\)\n  const owner = await prisma.user.upsert\\({\n    where: { email: 'owner@example.com' },\n    update: {},\n    create: {\n      email: 'owner@example.com',\n      password: ownerPassword,\n      firstName: 'Jean',\n      lastName: 'Dupont',\n      role: 'OWNER',\n      phone: '0601020304',\n      emailVerified: true,\n    },\n  }\\)\n  console.log\\('âœ… Owner created:', owner.email\\)\n\n  // Create Tenant User\n  const tenantPassword = await bcrypt.hash\\('tenant123', 10\\)\n  const tenant = await prisma.user.upsert\\({\n    where: { email: 'tenant@example.com' },\n    update: {},\n    create: {\n      email: 'tenant@example.com',\n      password: tenantPassword,\n      firstName: 'Marie',\n      lastName: 'Martin',\n      role: 'TENANT',\n      phone: '0605060708',\n      emailVerified: true,\n    },\n  }\\)\n  console.log\\('âœ… Tenant created:', tenant.email\\)\n\n  // Create Sample Properties\n  const property1 = await prisma.property.create\\({\n    data: {\n      ownerId: owner.id,\n      title: 'Appartement T3 lumineux - Centre ville',\n      description: 'Magnifique appartement de 65mÂ² situÃ© au cÅ“ur du centre-ville. EntiÃ¨rement rÃ©novÃ©, il dispose de 2 chambres spacieuses, un salon lumineux avec balcon, une cuisine Ã©quipÃ©e moderne et une salle de bain avec douche italienne. Proche de toutes commoditÃ©s \\(transports, commerces, Ã©coles\\).',\n      type: 'APARTMENT',\n      status: 'AVAILABLE',\n      address: '15 Rue de la RÃ©publique',\n      city: 'Lyon',\n      postalCode: '69002',\n      country: 'France',\n      latitude: 45.7578,\n      longitude: 4.8320,\n      bedrooms: 2,\n      bathrooms: 1,\n      surface: 65,\n      floor: 3,\n      totalFloors: 5,\n      furnished: true,\n      price: 950,\n      charges: 80,\n      deposit: 1900,\n      images: ['https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800', 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800'],\n      hasParking: false,\n      hasBalcony: true,\n      hasElevator: true,\n      hasGarden: false,\n      amenities: ['wifi', 'dishwasher', 'washing_machine'],\n      publishedAt: new Date\\(\\),\n    },\n  }\\)\n  console.log\\('âœ… Property 1 created:', property1.title\\)\n\n  const property2 = await prisma.property.create\\({\n    data: {\n      ownerId: owner.id,\n      title: 'Studio cosy - Quartier Ã©tudiant',\n      description: 'Charmant studio de 25mÂ² idÃ©alement situÃ© dans le quartier Ã©tudiant. Parfait pour un Ã©tudiant ou jeune actif. Cuisine Ã©quipÃ©e, salle d\\\\'eau, nombreux rangements. Ã€ 5min Ã  pied du mÃ©tro et des universitÃ©s.',\n      type: 'STUDIO',\n      status: 'AVAILABLE',\n      address: '42 Avenue Jean JaurÃ¨s',\n      city: 'Lyon',\n      postalCode: '69007',\n      country: 'France',\n      latitude: 45.7340,\n      longitude: 4.8357,\n      bedrooms: 0,\n      bathrooms: 1,\n      surface: 25,\n      floor: 2,\n      totalFloors: 4,\n      furnished: true,\n      price: 550,\n      charges: 50,\n      deposit: 1100,\n      images: ['https://images.unsplash.com/photo-1536376072261-38c75010e6c9?w=800'],\n      hasParking: false,\n      hasBalcony: false,\n      hasElevator: false,\n      hasGarden: false,\n      amenities: ['wifi', 'microwave'],\n      publishedAt: new Date\\(\\),\n    },\n  }\\)\n  console.log\\('âœ… Property 2 created:', property2.title\\)\n\n  const property3 = await prisma.property.create\\({\n    data: {\n      ownerId: owner.id,\n      title: 'Maison avec jardin - Banlieue',\n      description: 'Belle maison individuelle de 120mÂ² avec jardin de 300mÂ². Comprend 4 chambres, 2 salles de bain, un grand salon-sÃ©jour, une cuisine Ã©quipÃ©e et un garage. Quartier calme et familial, proche des Ã©coles et commerces.',\n      type: 'HOUSE',\n      status: 'AVAILABLE',\n      address: '8 Impasse des Lilas',\n      city: 'Villeurbanne',\n      postalCode: '69100',\n      country: 'France',\n      latitude: 45.7667,\n      longitude: 4.8800,\n      bedrooms: 4,\n      bathrooms: 2,\n      surface: 120,\n      furnished: false,\n      price: 1600,\n      charges: 100,\n      deposit: 3200,\n      images: ['https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800', 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800'],\n      hasParking: true,\n      hasBalcony: false,\n      hasElevator: false,\n      hasGarden: true,\n      amenities: ['wifi', 'dishwasher', 'washing_machine', 'garden'],\n      publishedAt: new Date\\(\\),\n    },\n  }\\)\n  console.log\\('âœ… Property 3 created:', property3.title\\)\n\n  console.log\\('\\\\nðŸŽ‰ Seeding completed successfully!'\\)\n  console.log\\('\\\\nðŸ“ Test Accounts:'\\)\n  console.log\\('Admin: admin@immoparticuliers.fr / admin123'\\)\n  console.log\\('Owner: owner@example.com / owner123'\\)\n  console.log\\('Tenant: tenant@example.com / tenant123'\\)\n}\n\nmain\\(\\)\n  .catch\\(\\(e\\) => {\n    console.error\\('âŒ Seeding error:', e\\)\n    process.exit\\(1\\)\n  }\\)\n  .finally\\(async \\(\\) => {\n    await prisma.$disconnect\\(\\)\n  }\\)\nEOF)",
      "Bash(npx tsx:*)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/.env << 'EOF'\nVITE_API_URL=http://localhost:5000/api/v1\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/package.json << 'EOF'\n{\n  \"name\": \"immoparticuliers-platform\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Plateforme de gestion locative entre particuliers\",\n  \"scripts\": {\n    \"start\": \"echo 'ðŸš€ Lancement de l\\\\\\\\'application...' && echo '\\\\nðŸ“¦ Backend: http://localhost:5000' && echo 'ðŸŒ Frontend: http://localhost:5173\\\\n' && \\(cd server && npm run dev\\) & \\(cd client && npm run dev\\)\",\n    \"install:all\": \"npm install && cd server && npm install && cd ../client && npm install\",\n    \"db:reset\": \"cd server && npx prisma migrate reset --force && npx tsx prisma/seed.ts\",\n    \"db:seed\": \"cd server && npx tsx prisma/seed.ts\"\n  },\n  \"keywords\": [\"immobilier\", \"location\", \"gestion-locative\"],\n  \"author\": \"ImmoParticuliers\",\n  \"license\": \"MIT\"\n}\nEOF)",
      "Bash(curl:*)",
      "Bash(timeout 5 npm run dev:*)",
      "Bash(lsof:*)",
      "Bash(kill:*)",
      "Bash(pkill:*)",
      "Bash(grep:*)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/src/services/api.ts << 'EOF'\nimport axios from 'axios'\n\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api/v1'\n\nconst api = axios.create\\({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n}\\)\n\n// Request interceptor to add auth token\napi.interceptors.request.use\\(\n  \\(config\\) => {\n    const token = localStorage.getItem\\('accessToken'\\)\n    if \\(token\\) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  },\n  \\(error\\) => {\n    return Promise.reject\\(error\\)\n  }\n\\)\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use\\(\n  \\(response\\) => response,\n  async \\(error\\) => {\n    const originalRequest = error.config\n\n    // If error is 401 and we haven't tried to refresh token yet\n    if \\(error.response?.status === 401 && !originalRequest._retry\\) {\n      originalRequest._retry = true\n\n      try {\n        const refreshToken = localStorage.getItem\\('refreshToken'\\)\n        \n        if \\(!refreshToken\\) {\n          // No refresh token, redirect to login\n          localStorage.removeItem\\('accessToken'\\)\n          localStorage.removeItem\\('refreshToken'\\)\n          window.location.href = '/login'\n          return Promise.reject\\(error\\)\n        }\n\n        // Try to refresh the token\n        const response = await axios.post\\(`${API_URL}/auth/refresh`, {\n          refreshToken,\n        }\\)\n\n        const { accessToken, refreshToken: newRefreshToken } = response.data.data\n\n        // Save new tokens\n        localStorage.setItem\\('accessToken', accessToken\\)\n        if \\(newRefreshToken\\) {\n          localStorage.setItem\\('refreshToken', newRefreshToken\\)\n        }\n\n        // Retry original request with new token\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`\n        return api\\(originalRequest\\)\n      } catch \\(refreshError\\) {\n        // Refresh failed, clear tokens and redirect to login\n        localStorage.removeItem\\('accessToken'\\)\n        localStorage.removeItem\\('refreshToken'\\)\n        window.location.href = '/login'\n        return Promise.reject\\(refreshError\\)\n      }\n    }\n\n    return Promise.reject\\(error\\)\n  }\n\\)\n\nexport default api\nEOF)",
      "Bash(/Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative/client/public/icon.svg << 'EOF'\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"#00BCD4\">\n  <rect width=\"512\" height=\"512\" rx=\"100\" fill=\"#00BCD4\"/>\n  <path d=\"M256 120L150 200v180h80v-100h52v100h80V200L256 120z\" fill=\"white\" stroke=\"white\" stroke-width=\"8\"/>\n</svg>\nEOF)",
      "Bash(npm run dev:*)",
      "Bash(npm run build:*)",
      "Bash(npx tsc:*)",
      "Bash(npx prisma db push:*)",
      "Bash(python3:*)",
      "Bash(npx prisma db execute:*)",
      "Bash(find:*)",
      "Bash(/dev/null << 'EOF'\nThis is a summary document only - no file created due to read-only constraints.\nEOF)",
      "Bash(xargs kill:*)",
      "mcp__ide__getDiagnostics",
      "Bash(ps:*)",
      "Bash(npm uninstall:*)",
      "WebFetch(domain:mon-saas-immo.onrender.com)",
      "Bash(git status:*)",
      "Bash(git add:*)",
      "Bash(git rm:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(npx prisma migrate diff:*)",
      "Bash(npx prisma migrate deploy:*)",
      "Bash(npx vite)",
      "Bash(git reset:*)",
      "Bash(echo:*)",
      "Bash(git -C /Users/enzo/Desktop/Projets/Applications_Web/En_Cours/plateforme-gestion-locative status)",
      "Bash(node -e:*)"
    ]
  }
}
